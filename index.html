<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Event Platform Refactored</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://sdk.amazonaws.com/js/aws-sdk-2.1149.0.min.js"></script>
    
    <style>
        /* --- Inline CSS --- */
        [data-page] { display: none; }
        [data-page="login"] { display: grid; }
        .loading-spinner {
            border: 4px solid rgba(255, 255, 255, 0.3);
            border-radius: 50%;
            border-top: 4px solid #fff;
            width: 24px;
            height: 24px;
            animation: spin 1s linear infinite;
        }
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        /* Style for the active tab */
        .tab-active {
            background-color: #4f46e5; /* indigo-600 */
            color: white;
            font-weight: 600;
        }
    </style>
</head>
<body class="bg-gray-100 font-sans">

    <div id="app">

        <main id="loginPage" data-page="login" class="min-h-screen grid md:grid-cols-2">
            <div class="hidden md:flex flex-col justify-center bg-gradient-to-br from-indigo-500 to-purple-600 text-white p-12">
                <h1 class="text-5xl font-bold mb-4">ClubConnect</h1>
                <p class="text-xl text-indigo-200 mb-8">The centralized platform for all your college clubs.</p>
                <div class="space-y-6 text-indigo-100">
                    <div>
                        <h3 class="font-semibold text-lg mb-2">Discover & Engage:</h3>
                        <ul class="list-disc list-inside space-y-2">
                            <li>Find out what's happening on campus.</li>
                            <li>Never miss an event from your favorite clubs.</li>
                            <li>Promote your club's activities to the entire college.</li>
                        </ul>
                    </div>
                </div>
            </div>
            <div class="flex flex-col justify-center items-center bg-white p-8 md:p-12">
                <div class="w-full max-w-md">
                    <h2 class="text-3xl font-bold text-gray-800 mb-6 text-center">Welcome Back!</h2>
                    <form id="loginForm" class="space-y-6">
                        <div>
                            <label for="loginEmail" class="block text-sm font-medium text-gray-700">Email</label>
                            <input type="email" id="loginEmail" required class="mt-1 block w-full px-4 py-3 border border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm">
                        </div>
                        <div>
                            <label for="loginPassword" class="block text-sm font-medium text-gray-700">Password</label>
                            <input type="password" id="loginPassword" required class="mt-1 block w-full px-4 py-3 border border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm">
                        </div>
                        <button type="submit" class="w-full flex justify-center py-3 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500">
                            Log In
                        </button>
                    </form>
                    <p class="mt-6 text-center text-sm text-gray-600">
                        Donâ€™t have an account?
                        <a href="#" id="navigateToSignup" class="font-medium text-indigo-600 hover:text-indigo-500">Sign Up</a>
                    </p>
                </div>
            </div>
        </main>
        
        <main id="signupPage" data-page="signup" class="min-h-screen grid md:grid-cols-2">
            <div class="hidden md:flex flex-col justify-center bg-gradient-to-br from-indigo-500 to-purple-600 text-white p-12">
                <h1 class="text-5xl font-bold mb-4">ClubConnect</h1>
                <p class="text-xl text-indigo-200 mb-8">Join the community and put your club on the map.</p>
                 <div class="space-y-6 text-indigo-100">
                    <div>
                        <h3 class="font-semibold text-lg mb-2">Getting Started is Easy:</h3>
                        <ul class="list-disc list-inside space-y-2">
                            <li>Register your club in under a minute.</li>
                            <li>Start posting events immediately.</li>
                            <li>Reach a wider audience on campus.</li>
                        </ul>
                    </div>
                </div>
            </div>
            <div class="flex flex-col justify-center items-center bg-white p-8 md:p-12">
                <div class="w-full max-w-md">
                    <h2 class="text-3xl font-bold text-gray-800 mb-6 text-center">Create Your Account</h2>
                    <form id="signupForm" class="space-y-5">
                        <div>
                            <label for="signupClubName" class="block text-sm font-medium text-gray-700">Club Name</label>
                            <input type="text" id="signupClubName" required class="mt-1 block w-full px-4 py-3 border border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm">
                        </div>
                         <div>
                            <label for="signupEmail" class="block text-sm font-medium text-gray-700">Email Address</label>
                            <input type="email" id="signupEmail" required class="mt-1 block w-full px-4 py-3 border border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm">
                        </div>
                        <div>
                            <label for="signupPassword" class="block text-sm font-medium text-gray-700">Password</label>
                            <input type="password" id="signupPassword" required minlength="6" class="mt-1 block w-full px-4 py-3 border border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm">
                        </div>
                        <button type="submit" class="w-full flex justify-center py-3 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500">
                            Sign Up
                        </button>
                    </form>
                    <p class="mt-6 text-center text-sm text-gray-600">
                        Already have an account?
                        <a href="#" id="navigateToLogin" class="font-medium text-indigo-600 hover:text-indigo-500">Log In</a>
                    </p>
                </div>
            </div>
        </main>
        
        <main id="eventsPage" data-page="events" class="bg-gray-50 min-h-screen">
            <header class="bg-white shadow-md sticky top-0 z-10">
                <nav class="container mx-auto px-4 sm:px-6 lg:px-8 py-4 flex justify-between items-center">
                    <div>
                        <h1 id="welcomeClubName" class="text-2xl font-bold text-gray-800"></h1>
                        <p id="welcomeUserEmail" class="text-sm text-gray-500"></p>
                    </div>
                    <div>
                         <button id="openEventModalBtn" class="mr-4 inline-flex items-center justify-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-700">
                            Add New Event
                        </button>
                        <button id="logoutButton" class="inline-flex items-center justify-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-indigo-700 bg-indigo-100 hover:bg-indigo-200">
                            Logout
                        </button>
                    </div>
                </nav>
            </header>
            
            <div class="container mx-auto px-4 sm:px-6 lg:px-8 py-8">
                <div class="mb-6 bg-white p-2 rounded-lg shadow-md flex space-x-2">
                    <button data-tab="upcoming" class="event-tab flex-1 text-center px-4 py-2 rounded-md transition-colors duration-200">Upcoming Events</button>
                    <button data-tab="past" class="event-tab flex-1 text-center px-4 py-2 rounded-md transition-colors duration-200">Past Events</button>
                    <button data-tab="my" class="event-tab flex-1 text-center px-4 py-2 rounded-md transition-colors duration-200">My Events</button>
                </div>

                <div>
                    <h2 id="eventListHeader" class="text-2xl font-bold text-gray-900 mb-6">Upcoming Events</h2>
                    <div id="eventList" class="grid grid-cols-1 md:grid-cols-2 gap-6">
                       <p class="col-span-full text-center text-gray-500">Loading events from S3...</p>
                    </div>
                </div>
            </div>
        </main>

        <div id="eventModal" class="fixed inset-0 bg-black bg-opacity-50 z-50 hidden items-center justify-center p-4">
            <div class="bg-white rounded-lg shadow-xl w-full max-w-2xl max-h-full overflow-y-auto">
                <div class="p-6 border-b flex justify-between items-center">
                    <h2 id="modalTitle" class="text-xl font-semibold text-gray-800">Post a New Event</h2>
                    <button id="closeEventModalBtn" class="text-gray-400 hover:text-gray-600 text-2xl">&times;</button>
                </div>
                <form id="eventForm" class="p-6 grid grid-cols-1 md:grid-cols-2 gap-6">
                    <input type="hidden" id="eventId">
                    <div class="md:col-span-2">
                        <label for="eventName" class="block text-sm font-medium text-gray-700">Event Name</label>
                        <input type="text" id="eventName" required class="mt-1 block w-full border-gray-300 rounded-md shadow-sm">
                    </div>
                    <div class="md:col-span-2">
                        <label for="eventDescription" class="block text-sm font-medium text-gray-700">Description</label>
                        <textarea id="eventDescription" rows="3" required class="mt-1 block w-full border-gray-300 rounded-md shadow-sm"></textarea>
                    </div>
                    <div>
                        <label for="eventDate" class="block text-sm font-medium text-gray-700">Event Date</label>
                        <input type="date" id="eventDate" required class="mt-1 block w-full border-gray-300 rounded-md shadow-sm">
                    </div>
                    <div>
                        <label for="eventImages" class="block text-sm font-medium text-gray-700">Event Images</label>
                        <input type="file" id="eventImages" multiple accept="image/*" class="mt-1 block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-indigo-50 file:text-indigo-600 hover:file:bg-indigo-100">
                        <p class="text-xs text-gray-500 mt-1">For updates, selecting new images will replace old ones.</p>
                    </div>
                    <div class="md:col-span-2 text-right">
                        <button type="submit" class="inline-flex items-center justify-center px-6 py-3 border border-transparent text-base font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-700">
                            <span id="saveEventBtnText">Save Event</span>
                            <div id="saveEventSpinner" class="loading-spinner hidden"></div>
                        </button>
                    </div>
                </form>
            </div>
        </div>

    </div>

    <script>
    class EventManager {
        constructor() {
            // --- AWS S3 Configuration ---
         
  const AWS_CONFIG = {
            region: 'eu-north-1', // e.g., 'us-east-1'
            accessKeyId: 'AKIA36UVB2U4VSIHU36S',
            secretAccessKey: 'U2zJNQwIvtaRTjrlXkqYMTE9sv4GxKvL6gMqOdc6',
            bucketName: 'adityaccfa'
        };

            this.AWS_CONFIG = AWS_CONFIG;
            this.s3 = this.initializeS3();

            // --- DOM Element References ---
            this.pages = { login: document.getElementById('loginPage'), signup: document.getElementById('signupPage'), events: document.getElementById('eventsPage') };
            this.loginForm = document.getElementById('loginForm');
            this.signupForm = document.getElementById('signupForm');
            this.navigateToSignup = document.getElementById('navigateToSignup');
            this.navigateToLogin = document.getElementById('navigateToLogin');
            this.logoutButton = document.getElementById('logoutButton');
            this.eventList = document.getElementById('eventList');
            this.welcomeClubName = document.getElementById('welcomeClubName');
            this.welcomeUserEmail = document.getElementById('welcomeUserEmail');
            this.eventModal = document.getElementById('eventModal');
            this.openEventModalBtn = document.getElementById('openEventModalBtn');
            this.closeEventModalBtn = document.getElementById('closeEventModalBtn');
            this.eventForm = document.getElementById('eventForm');
            this.modalTitle = document.getElementById('modalTitle');
            this.eventTabs = document.querySelectorAll('.event-tab');
            this.eventListHeader = document.getElementById('eventListHeader');

            // --- State Management ---
            this.currentUser = null;
            this.allFetchedEvents = [];
            this.activeTab = 'upcoming';

            this.bindEventListeners();
            this.showPage('login');
        }

        initializeS3() {
            if (this.AWS_CONFIG.accessKeyId !== 'YOUR_IAM_USER_ACCESS_KEY_ID') {
                AWS.config.update({
                    region: this.AWS_CONFIG.region,
                    accessKeyId: this.AWS_CONFIG.accessKeyId,
                    secretAccessKey: this.AWS_CONFIG.secretAccessKey
                });
                return new AWS.S3({ apiVersion: '2006-03-01' });
            }
            console.warn("AWS S3 credentials are not configured.");
            return null;
        }

        bindEventListeners() {
            this.navigateToSignup.addEventListener('click', (e) => { e.preventDefault(); this.showPage('signup'); });
            this.navigateToLogin.addEventListener('click', (e) => { e.preventDefault(); this.showPage('login'); });
            this.loginForm.addEventListener('submit', (e) => this.handleLogin(e));
            this.signupForm.addEventListener('submit', (e) => this.handleSignup(e));
            this.logoutButton.addEventListener('click', () => this.handleLogout());
            this.openEventModalBtn.addEventListener('click', () => this.openEventModal());
            this.closeEventModalBtn.addEventListener('click', () => this.closeEventModal());
            this.eventModal.addEventListener('click', (e) => { if(e.target === this.eventModal) this.closeEventModal(); });
            this.eventForm.addEventListener('submit', (e) => this.handleSaveEvent(e));
            this.eventTabs.forEach(tab => tab.addEventListener('click', (e) => this.handleTabClick(e)));
        }

        showPage(pageName) {
            Object.values(this.pages).forEach(page => page.style.display = 'none');
            if (this.pages[pageName]) {
                const isGridLayout = this.pages[pageName].classList.contains('grid');
                this.pages[pageName].style.display = isGridLayout ? 'grid' : 'block';
            }
        }

        // --- Modal & Form Logic ---
        openEventModal(eventId = null) {
            this.eventForm.reset();
            document.getElementById('eventId').value = '';
            if (eventId) {
                // This is an update, pre-fill the form
                const event = this.allFetchedEvents.find(e => e.id === eventId);
                if (event) {
                    this.modalTitle.textContent = "Edit Event";
                    document.getElementById('eventId').value = event.id;
                    document.getElementById('eventName').value = event.eventName;
                    document.getElementById('eventDescription').value = event.description;
                    document.getElementById('eventDate').value = event.date;
                }
            } else {
                // This is a new event
                this.modalTitle.textContent = "Post a New Event";
            }
            this.eventModal.classList.remove('hidden');
            this.eventModal.classList.add('flex');
        }
        
        closeEventModal() {
            this.eventModal.classList.add('hidden');
            this.eventModal.classList.remove('flex');
            this.eventForm.reset();
        }

        // --- Authentication ---
        handleSignup(e) {
            e.preventDefault();
            const clubName = document.getElementById('signupClubName').value.trim();
            const email = document.getElementById('signupEmail').value.trim().toLowerCase();
            const password = document.getElementById('signupPassword').value;
            if (!clubName || !email || !password) return alert('Please fill all fields.');
            const users = JSON.parse(localStorage.getItem('eventPlatformUsers')) || [];
            if (users.find(user => user.email === email)) return alert('An account with this email already exists.');
            users.push({ clubName, email, password });
            localStorage.setItem('eventPlatformUsers', JSON.stringify(users));
            alert('Signup successful! Please log in.');
            this.showPage('login');
        }

        handleLogin(e) {
            e.preventDefault();
            const email = document.getElementById('loginEmail').value.trim().toLowerCase();
            const password = document.getElementById('loginPassword').value;
            const users = JSON.parse(localStorage.getItem('eventPlatformUsers')) || [];
            const user = users.find(u => u.email === email && u.password === password);
            if (user) {
                this.currentUser = user;
                this.initializeAppForUser();
            } else {
                alert('Invalid email or password.');
            }
        }
        
        handleLogout() {
            this.currentUser = null;
            this.allFetchedEvents = [];
            this.eventList.innerHTML = '';
            this.showPage('login');
        }

        initializeAppForUser() {
            this.welcomeClubName.textContent = `Welcome, ${this.currentUser.clubName}`;
            this.welcomeUserEmail.textContent = this.currentUser.email;
            this.showPage('events');
            this.setActiveTab('upcoming');
            this.fetchAllEvents();
        }

        // --- Tab Logic ---
        handleTabClick(e) {
            this.setActiveTab(e.target.dataset.tab);
            this.renderEvents();
        }
        
        setActiveTab(tabName) {
            this.activeTab = tabName;
            const headers = { upcoming: "Upcoming Events", past: "Past Events", my: "My Events" };
            this.eventListHeader.textContent = headers[tabName];
            this.eventTabs.forEach(tab => tab.classList.toggle('tab-active', tab.dataset.tab === tabName));
        }

        // --- Event CRUD Operations ---
        async handleSaveEvent(e) {
            e.preventDefault();
            if (!this.s3) return alert("S3 is not configured.");
            
            const eventId = document.getElementById('eventId').value;
            const eventName = document.getElementById('eventName').value.trim();
            const eventDescription = document.getElementById('eventDescription').value.trim();
            const eventDate = document.getElementById('eventDate').value;
            const newImages = document.getElementById('eventImages').files;
            
            if (!eventName || !eventDescription || !eventDate) return alert("Please fill all event details.");
            
            this.toggleSpinner(true);
            
            try {
                let existingEvent = null;
                let imageKeys = [];
                
                if (eventId) { // UPDATE logic
                    existingEvent = this.allFetchedEvents.find(e => e.id === eventId);
                    imageKeys = existingEvent.imageKeys || [];
                    
                    // If new images are uploaded, delete the old ones
                    if (newImages.length > 0 && imageKeys.length > 0) {
                        await this.deleteImagesFromS3(imageKeys);
                        imageKeys = []; // Clear the old keys
                    }
                }
                
                // If new images were selected (for create or update), upload them
                if (newImages.length > 0) {
                    const uploadedKeys = await this.uploadImagesToS3(newImages, eventName);
                    imageKeys.push(...uploadedKeys);
                }

                const eventData = {
                    id: eventId || `evt_${Date.now()}`,
                    clubName: this.currentUser.clubName,
                    eventName,
                    description: eventDescription,
                    date: eventDate,
                    imageKeys,
                    postedBy: this.currentUser.email,
                };

                if (eventId) { // Replace existing event
                    const index = this.allFetchedEvents.findIndex(e => e.id === eventId);
                    this.allFetchedEvents[index] = eventData;
                } else { // Add new event
                    this.allFetchedEvents.push(eventData);
                }

                await this.updateEventsOnS3();
                alert(`Event ${eventId ? 'updated' : 'created'} successfully!`);
                this.closeEventModal();
                this.renderEvents();

            } catch (error) {
                console.error("Error saving event:", error);
                alert("Failed to save event.");
            } finally {
                this.toggleSpinner(false);
            }
        }

        async handleDeleteClick(eventId) {
            if (!confirm("Are you sure you want to delete this event? This action cannot be undone.")) return;
            
            try {
                const eventToDelete = this.allFetchedEvents.find(e => e.id === eventId);
                
                // Delete associated images from S3 first
                if (eventToDelete && eventToDelete.imageKeys && eventToDelete.imageKeys.length > 0) {
                    await this.deleteImagesFromS3(eventToDelete.imageKeys);
                }

                // Remove event from the local array
                this.allFetchedEvents = this.allFetchedEvents.filter(e => e.id !== eventId);

                // Update the events.json on S3
                await this.updateEventsOnS3();
                
                alert("Event deleted successfully.");
                this.renderEvents();

            } catch (error) {
                console.error("Error deleting event:", error);
                alert("Failed to delete event.");
            }
        }

        async fetchAllEvents() {
            if (!this.s3) {
                this.eventList.innerHTML = `<p class="col-span-full text-center text-red-500">S3 is not configured.</p>`;
                return;
            }
            this.eventList.innerHTML = `<p class="col-span-full text-center text-gray-500">Fetching events...</p>`;
            try {
                const data = await this.s3.getObject({ Bucket: this.AWS_CONFIG.bucketName, Key: 'events.json' }).promise();
                this.allFetchedEvents = JSON.parse(data.Body.toString('utf-8'));
                this.renderEvents();
            } catch (err) {
                if (err.code === 'NoSuchKey') {
                     this.allFetchedEvents = [];
                     this.renderEvents();
                } else {
                    console.error("Error fetching events:", err);
                    this.eventList.innerHTML = `<p class="col-span-full text-center text-red-500">Failed to load events.</p>`;
                }
            }
        }

        renderEvents() {
            let filteredEvents = [];
            const today = new Date().setHours(0, 0, 0, 0);

            if (this.activeTab === 'upcoming') {
                filteredEvents = this.allFetchedEvents.filter(event => new Date(event.date).setHours(0,0,0,0) >= today);
            } else if (this.activeTab === 'past') {
                filteredEvents = this.allFetchedEvents.filter(event => new Date(event.date).setHours(0,0,0,0) < today);
            } else if (this.activeTab === 'my') {
                filteredEvents = this.allFetchedEvents.filter(event => event.postedBy === this.currentUser.email);
            }
            
            if (filteredEvents.length === 0) {
                this.eventList.innerHTML = `<p class="col-span-full text-center text-gray-600">No events found in this category.</p>`;
                return;
            }
            
            filteredEvents.sort((a, b) => new Date(b.date) - new Date(a.date));
            this.eventList.innerHTML = filteredEvents.map(event => this.createEventCard(event)).join('');
        }

        createEventCard(event) {
            const imageUrls = (event.imageKeys || []).map(key => this.s3.getSignedUrl('getObject', { Bucket: this.AWS_CONFIG.bucketName, Key: key, Expires: 3600 }));
            const imagesHtml = imageUrls.length > 0 ?
                `<div class="mt-4 grid grid-cols-2 gap-2">
                    ${imageUrls.slice(0, 4).map(url => `<img src="${url}" alt="Event image" class="w-full h-24 object-cover rounded-md">`).join('')}
                </div>` : '';
            
            // Show action buttons only on 'My Events' tab
            const actionButtons = this.activeTab === 'my' ? `
                <div class="mt-4 pt-4 border-t flex space-x-2">
                    <button onclick="app.openEventModal('${event.id}')" class="flex-1 text-sm bg-blue-500 text-white py-2 px-4 rounded-md hover:bg-blue-600">Edit</button>
                    <button onclick="app.handleDeleteClick('${event.id}')" class="flex-1 text-sm bg-red-500 text-white py-2 px-4 rounded-md hover:bg-red-600">Delete</button>
                </div>` : '';

            return `
                <div class="bg-white p-6 rounded-lg shadow-lg flex flex-col">
                    <div class="flex-grow">
                        <div class="flex justify-between items-start">
                            <h3 class="text-xl font-bold text-gray-900">${event.eventName}</h3>
                            <p class="text-sm text-gray-600 font-semibold flex-shrink-0 ml-2">${new Date(event.date).toLocaleDateString()}</p>
                        </div>
                        <p class="text-sm font-medium text-purple-700 mt-1">${event.clubName}</p>
                        <p class="text-gray-700 mt-2 text-sm">${event.description}</p>
                        ${imagesHtml}
                    </div>
                    ${actionButtons}
                </div>`;
        }

        // --- S3 Helper Functions ---
        async uploadImagesToS3(files, eventName) {
            const safeClubName = this.currentUser.clubName.replace(/\s+/g, '-').toLowerCase();
            const safeEventName = eventName.replace(/\s+/g, '-').toLowerCase();
            const uploadPromises = [];

            for (let i = 0; i < files.length; i++) {
                const file = files[i];
                const key = `images/${safeClubName}_${safeEventName}_${Date.now()}_${i}.${file.name.split('.').pop()}`;
                uploadPromises.push(this.s3.upload({ Bucket: this.AWS_CONFIG.bucketName, Key: key, Body: file, ContentType: file.type }).promise());
            }

            const results = await Promise.all(uploadPromises);
            return results.map(result => result.Key); // Return the array of keys
        }

        async deleteImagesFromS3(keys) {
            if (!keys || keys.length === 0) return;
            const objects = keys.map(key => ({ Key: key }));
            await this.s3.deleteObjects({ Bucket: this.AWS_CONFIG.bucketName, Delete: { Objects: objects } }).promise();
        }
        
        async updateEventsOnS3() {
            await this.s3.putObject({
                Bucket: this.AWS_CONFIG.bucketName,
                Key: 'events.json',
                Body: JSON.stringify(this.allFetchedEvents, null, 2),
                ContentType: 'application/json'
            }).promise();
        }
        
        // --- UI Helpers ---
        toggleSpinner(isLoading) {
            const btnText = document.getElementById('saveEventBtnText');
            const spinner = document.getElementById('saveEventSpinner');
            document.getElementById('eventForm').querySelector('button[type="submit"]').disabled = isLoading;
            btnText.classList.toggle('hidden', isLoading);
            spinner.classList.toggle('hidden', !isLoading);
        }
    }

    // Expose the class instance to the global window object
    // so that onclick attributes in HTML can access its methods.
    window.app = new EventManager();
    </script>

</body>
</html>
